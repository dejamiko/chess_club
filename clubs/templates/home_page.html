{% extends 'base_content.html' %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-sm-8">
                <h1>Hello, {{ user.first_name }}!</h1>
            </div>
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-subtitle mb-2 text-muted">Daily chess puzzle ({{ date }})</h4>
                        <img style="margin-bottom: 12px;" class="card-img" id="puzzle-image" alt="Daily chess puzzle" />
                        <p style="float:right; margin-bottom: 0px;" class="card-text" id="puzzle-text"></p>
                        <a class="btn btn-outline-secondary btn-sm" id="puzzle-link" href="#" target="_blank">Try to solve</a>
                        <a class="btn btn-outline-success btn-sm" id="puzzle-solution" href="#" target="_blank">View solution</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        fetch("https://chesspuzzle.net/Daily/Api")
            .then(response => response.json())
            .then(daily_puzzle => {
                document.getElementById("puzzle-image").src = daily_puzzle.Image;
                document.getElementById("puzzle-text").innerHTML = daily_puzzle.Text;
                document.getElementById("puzzle-link").href = daily_puzzle.Link;
                document.getElementById("puzzle-solution").href = daily_puzzle.Link.replace("Puzzle", "Solution");
            })
    </script>
    <!-- {% include 'partials/background.html' with colour="C6A38B" %} -->
{% endblock %}